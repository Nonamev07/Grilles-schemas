<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Arc Raiders – Blueprints</title>

<style>
body {
  background:#222;
  color:white;
  font-family:sans-serif;
  display:flex;
  flex-wrap:wrap;
  gap:40px;
  justify-content:center;
}

.player {
  text-align:center;
}

.grid {
  display:grid;
  grid-template-columns: repeat(10, 64px);
  gap:2px;
}

.cell {
  width:64px;
  height:64px;
  background-image:url("imagesschémasAcRaiders/100px-UI_Blueprint_background.png.webp");
  background-size:cover;
  display:flex;
  align-items:center;
  justify-content:center;
}

.cell img {
  max-width:90%;
  max-height:90%;
}
</style>
</head>

<body>

<script>
const players = ["REGULUS","FOX","Cress","Noname"];

const blueprints = [
  ["80px-Bettina.png.webp","80px-Blue_Light_Stick.png.webp","80px-Aphelion.png.webp","80px-Combat_Mk._3_(Flanking).png.webp","80px-Combat_Mk._3_(Aggressive).png.webp","80px-Complex_Gun_Parts.png.webp","80px-Fireworks_Box.png.webp","80px-Gas_Mine.png.webp"],
  ["80px-Green_Light_Stick.png.webp","80px-Pulse_Mine.png.webp","80px-Seeker_Grenade.png.webp","80px-Looting_Mk._3_(Survivor).png.webp","80px-Angled_Grip_II.png.webp","80px-Angled_Grip_III.png.webp","80px-Hullcracker-Level1.png.webp","80px-Anvil-Level1.png.webp"],
  ["80px-Barricade_Kit.png.webp","80px-Blaze_Grenade.png.webp","80px-Bobcat-Level1.png.webp","80px-Osprey-Level1.png.webp","80px-Burletta-Level1.png.webp","80px-Compensator_II.png.webp","80px-Compensator_III.png.webp","80px-Defibrillator.png.webp"],
  ["80px-Equalizer.png.webp","80px-Extended_Barrel.png.webp","80px-Extended_Light_Mag_II.png.webp","80px-Extended_Light_Mag_III.png.webp","80px-Extended_Medium_Mag_II.png.webp","80px-Extended_Medium_Mag_III.png.webp","80px-Extended_Shotgun_Mag_II.png.webp","80px-Extended_Shotgun_Mag_III.png.webp"],
  ["80px-Remote_Raider_Flare.png.webp","80px-Heavy_Gun_Parts.png.webp","80px-Venator-Level1.png.webp","80px-Il_Toro-Level1.png.webp","80px-Jolt_Mine.png.webp","80px-Explosive_Mine.png.webp","80px-Jupiter.png.webp","80px-Light_Gun_Parts.png.webp"],
  ["80px-Lightweight_Stock.png.webp","80px-Lure_Grenade.png.webp","80px-Medium_Gun_Parts.png.webp","80px-Torrente-Level1.png.webp","80px-Muzzle_Brake_II.png.webp","80px-Muzzle_Brake_III.png.webp","80px-Padded_Stock.png.webp"],
  ["80px-Shotgun_Choke_II.png.webp","80px-Shotgun_Choke_III.png.webp","80px-Shotgun_Silencer.png.webp","80px-Showstopper.png.webp","80px-Silencer_I.png.webp","80px-Silencer_II.png.webp","80px-Smoke_Grenade.png.webp"],
  ["80px-Snap_Hook.png.webp","80px-Stable_Stock_II.png.webp","80px-Stable_Stock_III.png.webp","80px-Tactical_Mk._3_(Defensive).png.webp","80px-Tactical_Mk._3_(Healing).png.webp","80px-Tagging_Grenade.png.webp","80px-Tempest-Level1.png.webp"],
  ["80px-Trailblazer.png.webp","80px-Trigger_Nade.png.webp","80px-Vita_Shot.png.webp","80px-Vita_Spray.png.webp","80px-Vulcano-Level1.png.webp","80px-Wolfpack.png.webp","80px-Red_Light_Stick.png.webp"],
  ["80px-Yellow_Light_Stick.png.webp","80px-Deadline.png.webp",null,null,null,null,null]
];

async function loadState() {
  const res = await fetch("/api/state");
  return await res.json();
}

async function saveState(state) {
  await fetch("/api/state", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify(state)
  });
}

(async () => {
  const state = await loadState();

  players.forEach(player => {
    const box = document.createElement("div");
    box.className = "player";
    box.innerHTML = `<h3>${player}</h3><div class="grid"></div>`;
    document.body.appendChild(box);

    const grid = box.querySelector(".grid");

    let index = 0;
    for (let row = 0; row < 8; row++) {
      for (let col = 0; col < 10; col++) {
        const cell = document.createElement("div");
        cell.className = "cell";

        const imgName = blueprints[col][row];
        if (imgName) {
          const img = document.createElement("img");
          img.src = "imagesschémasAcRaiders/" + imgName;
          cell.appendChild(img);
        }

        if (state[player][index]) {
          cell.style.opacity = "0.4";
        }

        cell.onclick = async () => {
          state[player][index] = !state[player][index];
          cell.style.opacity = state[player][index] ? "0.4" : "1";
          await saveState(state);
        };

        grid.appendChild(cell);
        index++;
      }
    }
  });
})();
</script>


</body>
</html>
