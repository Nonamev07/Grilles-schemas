<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Grilles Arc Raiders</title>
  <style>
    body {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
      font-family: sans-serif;
      background-color: #222;
    }

    .grille-container {
      text-align: center;
    }

    .grille {
      display: grid;
      grid-template-columns: repeat(10, 60px);
      grid-auto-rows: 60px;
      gap: 0;
      margin-bottom: 10px;
    }

    .case {
      width: 60px;
      height: 60px;
      background-image: url('imagessch√©masAcRaiders/100px-UI_Blueprint_background.png.webp');
      background-size: cover;
      border: 1px solid #888;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: opacity 0.2s;
    }

    .case img {
      max-width: 90%;
      max-height: 90%;
    }

    .nom-joueur {
      font-weight: bold;
      margin-bottom: 5px;
      color: #fff;
    }
  </style>
</head>
<body>

<div class="grille-container">
  <div class="nom-joueur">REGULUS</div>
  <div class="grille" id="grille-regulus"></div>
</div>

<div class="grille-container">
  <div class="nom-joueur">FOX</div>
  <div class="grille" id="grille-fox"></div>
</div>

<div class="grille-container">
  <div class="nom-joueur">Cress</div>
  <div class="grille" id="grille-cress"></div>
</div>

<div class="grille-container">
  <div class="nom-joueur">Noname</div>
  <div class="grille" id="grille-noname"></div>
</div>

<script>
const joueurs = ['grille-regulus','grille-fox','grille-cress','grille-noname'];

// üîπ Tableau colonne par colonne (ordre approximatif, √† ajuster si n√©cessaire)
const blueprintColumns = [
  ["80px-Bettina.png.webp","80px-Blue_Light_Stick.png.webp","80px-Aphelion.png.webp","80px-Combat_Mk._3_(Flanking).png.webp","80px-Combat_Mk._3_(Aggressive).png.webp","80px-Complex_Gun_Parts.png.webp","80px-Fireworks_Box.png.webp","80px-Gas_Mine.png.webp"], 
  ["80px-Green_Light_Stick.png.webp","80px-Pulse_Mine.png.webp","80px-Seeker_Grenade.png.webp","80px-Looting_Mk._3_(Survivor).png.webp","80px-Angled_Grip_II.png.webp","80px-Angled_Grip_III.png.webp","80px-Hullcracker-Level1.png.webp","80px-Anvil-Level1.png.webp"], 
  ["80px-Barricade_Kit.png.webp","80px-Blaze_Grenade.png.webp","80px-Bobcat-Level1.png.webp","80px-Osprey-Level1.png.webp","80px-Burletta-Level1.png.webp","80px-Compensator_II.png.webp","80px-Compensator_III.png.webp","80px-Defibrillator.png.webp"], 
  ["80px-Equalizer.png.webp","80px-Extended_Barrel.png.webp","80px-Extended_Light_Mag_II.png.webp","80px-Extended_Light_Mag_III.png.webp","80px-Extended_Medium_Mag_II.png.webp","80px-Extended_Medium_Mag_III.png.webp","80px-Extended_Shotgun_Mag_II.png.webp","80px-Extended_Shotgun_Mag_III.png.webp"], 
  ["80px-Remote_Raider_Flare.png.webp","80px-Heavy_Gun_Parts.png.webp","80px-Venator-Level1.png.webp","80px-Il_Toro-Level1.png.webp","80px-Jolt_Mine.png.webp","80px-Explosive_Mine.png.webp","80px-Jupiter.png.webp","80px-Light_Gun_Parts.png.webp"], 
  ["80px-Lightweight_Stock.png.webp","80px-Lure_Grenade.png.webp","80px-Medium_Gun_Parts.png.webp","80px-Torrente-Level1.png.webp","80px-Muzzle_Brake_II.png.webp","80px-Muzzle_Brake_III.png.webp","80px-Padded_Stock.png.webp"], 
  ["80px-Shotgun_Choke_II.png.webp","80px-Shotgun_Choke_III.png.webp","80px-Shotgun_Silencer.png.webp","80px-Showstopper.png.webp","80px-Silencer_I.png.webp","80px-Silencer_II.png.webp","80px-Smoke_Grenade.png.webp"], 
  ["80px-Snap_Hook.png.webp","80px-Stable_Stock_II.png.webp","80px-Stable_Stock_III.png.webp","80px-Tactical_Mk._3_(Defensive).png.webp","80px-Tactical_Mk._3_(Healing).png.webp","80px-Tagging_Grenade.png.webp","80px-Tempest-Level1.png.webp"], 
  ["80px-Trailblazer.png.webp","80px-Trigger_Nade.png.webp","80px-Vita_Shot.png.webp","80px-Vita_Spray.png.webp","80px-Vulcano-Level1.png.webp","80px-Wolfpack.png.webp","80px-Red_Light_Stick.png.webp"], 
  ["80px-Yellow_Light_Stick.png.webp","80px-Deadline.png.webp",null,null,null,null,null] 
];

async function getState() {
  const res = await fetch('/api/state');
  return await res.json();
}

async function saveState(state) {
  await fetch('/api/state', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify(state)
  });
}

async function init() {
  const state = await getState();

  joueurs.forEach(id => {
    const grille = document.getElementById(id);
    const nbLignes = 8;

    for(let row=0; row<nbLignes; row++){
      for(let col=0; col<10; col++){
        const index = row*10 + col;
        const caseDiv = document.createElement('div');
        caseDiv.className = 'case';
        const blueprintImage = blueprintColumns[col][row] || null;
        if(blueprintImage){
          caseDiv.innerHTML = `<img src="imagessch√©masAcRaiders/${blueprintImage}" alt="Blueprint">`;
        }

        const joueur = id.replace('grille-','');
        if(state[joueur][index]){
          caseDiv.style.opacity = 0.5;
        }

        caseDiv.addEventListener('click', async () => {
          state[joueur][index] = !state[joueur][index];
          caseDiv.style.opacity = state[joueur][index] ? 0.5 : 1;
          await saveState(state);
        });

        grille.appendChild(caseDiv);
      }
    }
  });
}

init();
</script>

</body>
</html>
